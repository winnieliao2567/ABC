<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <title>立即訂餐｜共饗 SHARING 附近美食平台，免註冊支援 Line Pay，優惠多</title>
    <!-- description -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta name="description" content="共饗是一個為消費者打造的智慧訂餐平台，讓你快速找到附近優質店家、清楚比較菜單與價格，免註冊、免下載  App，隨時隨地手機輕鬆訂餐，省時又安心。" />
    <meta name="robots" content="index, follow" />
    <!-- Open Graph (OG) tags for social media preview (optional but recommended) -->
    <meta property="og:site_name" content="共饗 SHARING" />
    <meta property="og:title" content="共饗 SHARING 智慧訂餐平台" />
    <meta property="og:description" content="共饗是一個為消費者打造的智慧訂餐平台，讓你快速找到附近優質店家、清楚比較菜單與價格，免註冊、免下載 App，隨時隨地手機輕鬆訂餐，省時又安心。" />
    <meta property="og:url" content="https://sharings.com.tw" />
    <meta property="og:image" content="https://sharings.com.tw/img/logo.svg" /> <!-- replace with your preview image -->

    
    <!-- jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- <link rel="stylesheet" href="css/bootstrap.min.css"> -->

    <!-- fontawesome -->
    <script src="https://kit.fontawesome.com/4de7eaf6aa.js" crossorigin="anonymous"></script>

    <!-- Theme style -->
    <link rel="stylesheet" href="AdminLTE3/dist/css/adminlte.min.css">
    <script src="AdminLTE3/dist/js/adminlte.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css" />

    <!-- toastr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.css" />

    <!-- datepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

    <!-- Vue.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.5.13/vue.global.min.js"></script>

    <script src="js/share2.js?v101"></script>
    <link rel="stylesheet" href="css/share2.css" />

    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"></script>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        /* === 修正手機瀏覽器拖曳問題（優化版） === */
        html {
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
        }
        
        body {
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            width: 100%;
            -webkit-overflow-scrolling: touch;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }

        /* 基本盒模型 */
        *, *::before, *::after {
            box-sizing: border-box;
        }

        /* 主要容器優化 */
        .wrapper {
            width: 100%;
            overflow-x: hidden;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }

        .content-wrapper, .content {
            width: 100%;
            overflow-x: hidden;
        }

        .main-header {
            width: 100%;
            overflow-x: hidden;
            overflow-y: visible; /* 確保dropdown可以正常顯示 */
            position: relative;
        }

        /* Bootstrap容器優化 */
        .container, .container-fluid {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            padding-left: 15px;
            padding-right: 15px;
        }

        .row {
            margin-left: -15px;
            margin-right: -15px;
            width: calc(100% + 30px);
            max-width: calc(100% + 30px);
        }

        [class*="col-"] {
            padding-left: 15px;
            padding-right: 15px;
        }

        /* 導航欄優化 */
        .navbar {
            width: 100%;
            margin: 0;
            padding: 0;
        }

        .navbar .container {
            width: 100%;
            max-width: 100%;
            margin: 0;
            overflow: visible; /* 確保dropdown不被截斷 */
        }

        /* 內容區域優化 */
        .content-header {
            width: 100%;
            margin: 0;
            padding-left: 0;
            padding-right: 0;
        }

        .content-header .container {
            width: 100%;
            margin: 0;
        }

        /* 媒體元素優化 */
        img, video, iframe, embed, object {
            max-width: 100%;
            height: auto;
        }

        /* 卡片和容器優化 */
        .card, .content-section {
            max-width: 100%;
            overflow-x: hidden;
        }

        /* Swiper優化 */
        .swiper-container {
            max-width: 100%;
            overflow: hidden;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }

        .swiper-wrapper {
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }

        /* 搜尋欄優化 */
        .search-container, .search-wrapper, .premium-search {
            max-width: 100%;
        }

        /* 手機版優化 */
        @media (max-width: 768px) {
            .container {
                padding-left: 10px;
                padding-right: 10px;
            }
            
            .row {
                margin-left: -10px;
                margin-right: -10px;
                width: calc(100% + 20px);
            }
            
            [class*="col-"] {
                padding-left: 10px;
                padding-right: 10px;
            }
            
            .navbar-brand img {
                max-width: 150px;
                width: auto;
            }
            
            /* 強制招呼語和搜尋欄在同一行 */
            .content-header .row {
                flex-wrap: nowrap !important;
            }
            
            .content-header h1 {
                font-size: 1rem !important;
            }
            
            .search-container {
                min-width: 0 !important;
            }
            
            .premium-search {
                min-width: 0 !important;
            }
            
            .premium-input {
                min-width: 120px !important;
            }
        }

        /* 極小螢幕優化 */
        @media (max-width: 480px) {
            .container {
                padding-left: 8px;
                padding-right: 8px;
            }
            
            .row {
                margin-left: -8px;
                margin-right: -8px;
                width: calc(100% + 16px);
            }
            
            [class*="col-"] {
                padding-left: 8px;
                padding-right: 8px;
            }
            
            .navbar-brand img {
                max-width: 120px;
            }
            
            /* 極小螢幕也強制同一行，但進一步縮小字體 */
            .content-header h1 {
                font-size: 0.9rem !important;
            }
            
            .premium-input {
                min-width: 100px !important;
                font-size: 0.9rem !important;
            }
        }

        /* === 滑動性能優化 === */
        .content-section, .card, .swiper-slide {
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            -webkit-perspective: 1000;
            perspective: 1000;
        }

        /* 觸控優化 */
        button, a, .dropdown-item, .nav-link {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* 滾動條優化 */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }

        /* 防止選擇和拖曳干擾 */
        img, .card-img-top {
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* 修正會員功能選單置頂問題 */
        .navbar .dropdown-menu {
            z-index: 9999 !important;
            position: absolute !important;
        }

        .dropdown-menu-lg.dropdown-menu-right {
            z-index: 9999 !important;
            position: absolute !important;
        }

        /* 確保dropdown父元素不會截斷子元素 */
        .nav-item.dropdown {
            position: static !important;
        }

        .navbar-nav {
            overflow: visible !important;
        }

        /* === 高級字體系統 === */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;300;400;500;700;900&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700;900&family=Crimson+Text:wght@400;600;700&display=swap');
        
        :root {
            /* 字體家族 */
            --font-primary: 'Noto Sans TC', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-english: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-logo: 'Playfair Display', 'Crimson Text', serif;
            
            /* 字體大小階層 */
            --text-xs: 0.75rem;      /* 12px */
            --text-sm: 0.875rem;     /* 14px */
            --text-base: 1rem;       /* 16px */
            --text-lg: 1.125rem;     /* 18px */
            --text-xl: 1.25rem;      /* 20px */
            --text-2xl: 1.5rem;      /* 24px */
            --text-3xl: 1.875rem;    /* 30px */
            --text-4xl: 2.25rem;     /* 36px */
            
            /* 字重 */
            --font-light: 300;
            --font-normal: 400;
            --font-medium: 500;
            --font-semibold: 600;
            --font-bold: 700;
            --font-black: 900;
            
            /* 行高 */
            --leading-tight: 1.25;
            --leading-snug: 1.375;
            --leading-normal: 1.5;
            --leading-relaxed: 1.625;
            --leading-loose: 2;
            
            /* 字間距 */
            --tracking-tight: -0.025em;
            --tracking-normal: 0;
            --tracking-wide: 0.025em;
            --tracking-wider: 0.05em;
            
            /* 高級色彩系統 */
            --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a;
            --text-muted: #6b7280;
            --text-subtle: #9ca3af;
            --text-white: #ffffff;
            --text-accent: #d59c42;
            --text-success: #10b981;
            --text-warning: #f59e0b;
            --text-danger: #ef4444;
        }

        /* 全域字體設定 */
        body {
            font-family: var(--font-primary);
            font-weight: var(--font-normal);
            line-height: var(--leading-normal);
            letter-spacing: var(--tracking-normal);
            color: var(--text-primary);
            font-size: var(--text-base);
        }

        /* 標題層級系統 */
        h1, .h1 {
            font-size: var(--text-4xl);
            font-weight: var(--font-bold);
            line-height: var(--leading-tight);
            letter-spacing: var(--tracking-tight);
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }

        h2, .h2 {
            font-size: var(--text-3xl);
            font-weight: var(--font-semibold);
            line-height: var(--leading-tight);
            letter-spacing: var(--tracking-tight);
            color: var(--text-primary);
            margin-bottom: 1.25rem;
        }

        h3, .h3 {
            font-size: var(--text-2xl);
            font-weight: var(--font-semibold);
            line-height: var(--leading-snug);
            color: var(--text-primary);
            margin-bottom: 1rem;
            position: relative;
        }

        h4, .h4 {
            font-size: var(--text-xl);
            font-weight: var(--font-medium);
            line-height: var(--leading-snug);
            color: var(--text-primary);
            margin-bottom: 0.75rem;
        }

        h5, .h5 {
            font-size: var(--text-lg);
            font-weight: var(--font-medium);
            line-height: var(--leading-snug);
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        h6, .h6 {
            font-size: var(--text-base);
            font-weight: var(--font-medium);
            line-height: var(--leading-snug);
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        /* 段落和文字樣式 */
        p, .text {
            font-size: var(--text-base);
            line-height: var(--leading-relaxed);
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .text-large {
            font-size: var(--text-lg);
            line-height: var(--leading-relaxed);
            color: var(--text-secondary);
        }

        .text-small {
            font-size: var(--text-sm);
            line-height: var(--leading-normal);
            color: var(--text-muted);
        }

        .text-xs {
            font-size: var(--text-xs);
            line-height: var(--leading-normal);
            color: var(--text-muted);
        }

        /* 專業文字效果 */
        .text-gradient {
            background: linear-gradient(135deg, var(--text-accent), #f59e0b);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: var(--font-bold);
        }

        .text-shadow {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .text-shadow-lg {
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        /* 麵包屑優化 */
        .breadcrumb {
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
        }

        .breadcrumb-item {
            color: var(--text-muted);
        }

        .breadcrumb-item a {
            color: var(--text-accent);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .breadcrumb-item a:hover {
            color: var(--primary_deeper);
        }

        /* 導航欄文字 */
        .navbar .navbar-brand {
            font-family: var(--font-logo);
            font-weight: var(--font-bold);
            font-size: 1.5rem;
            letter-spacing: 0.05em;
        }

        .navbar .nav-link {
            font-size: var(--text-base);
            font-weight: var(--font-medium);
            color: var(--text-primary);
            transition: color 0.2s ease;
        }

        .navbar .nav-link:hover {
            color: var(--text-accent);
        }

        /* === 店家卡片樣式 (參考外送平台) === */
        .store-card {
            height: 100%;
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
        }

        .store-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
            text-decoration: none;
        }

        .store-card .card-img-top {
            width: 100%;
            aspect-ratio: 8/5;
            object-fit: cover;
            object-position: center;
            border-radius: 0;
        }

        .store-card .card-body {
            flex: 1;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* === 店家完整顯示布局 === */
        .stores-grid {
            display: block;
            margin: 0;
            padding: 0;
        }

        .store-grid-card {
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
            text-decoration: none;
            color: inherit;
            margin-bottom: 1rem;
            width: 100%;
            transform: scale(1);
            transform-origin: center;
        }

        /* 桌面版店家卡片限制寬度 - 固定最大尺寸 */
        @media (min-width: 768px) {
            .stores-grid {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            .store-grid-card {
                max-width: 480px;
                width: 100%;
            }
        }

        @media (min-width: 992px) {
            .store-grid-card {
                max-width: 520px;
            }
        }

        @media (min-width: 1200px) {
            .store-grid-card {
                max-width: 550px;
            }
        }

        /* 超大解析度限制 */
        @media (min-width: 1600px) {
            .store-grid-card {
                max-width: 580px;
            }
        }

        .store-grid-card:hover {
            transform: scale(1) translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
            text-decoration: none;
            color: inherit;
        }

        .store-grid-card .card-img-top {
            width: 100%;
            height: 200px;
            object-fit: cover;
            object-position: center;
            border-radius: 0;
        }

        .store-grid-card .card-body {
            flex: 1;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .store-grid-card .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            line-height: 1.3;
            color: var(--text-primary);
            margin: 0 0 0.5rem 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .store-grid-card .delivery-time {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-accent);
            margin: 0 0 0.25rem 0;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .store-grid-card .delivery-info {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin: 0;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .store-grid-card .delivery-info .distance {
            font-weight: 500;
            color: var(--text-secondary);
        }

        /* === 高級標籤樣式 === */
        .store-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .tag-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 2rem;
            font-size: 0.75rem;
            font-weight: 500;
            background: linear-gradient(135deg, var(--text-accent), #f59e0b);
            color: white;
            box-shadow: 0 2px 8px rgba(213, 156, 66, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.2s ease;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
        }

        .tag-badge:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(213, 156, 66, 0.4);
        }

        .tag-badge.more-tags {
            background: linear-gradient(135deg, var(--text-muted), #9ca3af);
            box-shadow: 0 2px 8px rgba(107, 114, 128, 0.3);
        }

        /* 不同類型標籤的顏色變化 */
        .tag-badge:nth-child(1) {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .tag-badge:nth-child(2) {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .tag-badge:nth-child(3) {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        /* 標籤響應式調整 */
        @media (max-width: 575.98px) {
            .tag-badge {
                font-size: 0.7rem;
                padding: 0.2rem 0.6rem;
            }
            
            .store-tags {
                gap: 0.375rem;
                margin-top: 0.375rem;
            }
        }

        @media (min-width: 1200px) {
            .tag-badge {
                font-size: 0.8rem;
                padding: 0.3rem 0.8rem;
            }
            
            .store-tags {
                gap: 0.625rem;
                margin-top: 0.625rem;
            }
        }

        .store-status-badge {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 2;
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .store-status-badge.open {
            background: rgba(16, 185, 129, 0.9);
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .store-status-badge.closed {
            background: rgba(107, 114, 128, 0.9);
            color: white;
            box-shadow: 0 2px 8px rgba(107, 114, 128, 0.3);
        }

        /* === 猜你想看店家橫幅設計 === */
        .fromstore-card {
            display: flex !important;
            flex-direction: row !important;
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(213, 156, 66, 0.1);
            transition: all 0.3s ease;
            margin-bottom: 0.5rem;
            text-decoration: none;
            color: inherit;
            min-height: 160px;
            width: 100%;
        }
        
        .fromstore-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
            text-decoration: none;
            color: inherit;
        }
        
        .fromstore-card .card-img-top {
            width: 200px !important;
            height: 100% !important;
            object-fit: cover !important;
            object-position: center !important;
            border-radius: 0 !important;
            display: block !important;
            padding: 0 !important;
            margin: 0 !important;
            background: none !important;
            flex-shrink: 0;
            border: none !important;
        }
        
        .fromstore-card .card-body {
            flex: 1;
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 0.75rem;
        }
        
        .fromstore-card .card-title {
            font-size: 1.5rem;
            font-weight: var(--font-bold);
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            line-height: 1.2;
            word-wrap: break-word;
            white-space: normal;
        }
        
        .fromstore-card .delivery-time,
        .fromstore-card .delivery-info {
            font-size: 1rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .fromstore-card .delivery-time {
            color: var(--text-accent);
            font-weight: var(--font-medium);
        }

        /* 手機版猜你想看 */
        @media (max-width: 767.98px) {
            .fromstore-card {
                min-height: 120px;
            }
            
            .fromstore-card .card-img-top {
                width: 120px !important;
                min-width: 120px !important;
                max-width: 120px !important;
            }
            
            .fromstore-card .card-body {
                padding: 1rem;
                flex: 1;
                min-width: 0;
            }
            
            .fromstore-card .card-title {
                font-size: 1.125rem;
                line-height: 1.2;
            }
            
            .fromstore-card .delivery-time,
            .fromstore-card .delivery-info {
                font-size: 0.875rem;
            }
        }

        /* 平板版猜你想看 */
        @media (min-width: 768px) and (max-width: 1199.98px) {
            .fromstore-card {
                min-height: 150px;
            }
            
            .fromstore-card .card-img-top {
                width: 180px !important;
            }
        }

        /* === 領券浮動按鈕 === */
        .floating-coupon-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--text-accent), #f59e0b);
            border-radius: 50%;
            border: none;
            box-shadow: 0 4px 20px rgba(213, 156, 66, 0.4);
            color: white;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .floating-coupon-btn:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 6px 25px rgba(213, 156, 66, 0.6);
        }

        .floating-coupon-btn::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: inherit;
            animation: pulse 2s infinite;
            z-index: -1;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            70% {
                transform: scale(1.3);
                opacity: 0;
            }
            100% {
                transform: scale(1.3);
                opacity: 0;
            }
        }

        /* 手機版調整 */
        @media (max-width: 767.98px) {
            .floating-coupon-btn {
                bottom: 70px;
                right: 15px;
                width: 56px;
                height: 56px;
                font-size: 1.3rem;
            }
        }

        /* === 隱藏區塊樣式 === */
        .hidden-section {
            display: none;
        }

        .hidden-section.enabled {
            display: block;
        }

        /* === 精選餐廳和活動專區樣式 === */
        .featured-restaurants-grid,
        .activity-zone-grid {
            display: block;
            margin: 0;
            padding: 0;
        }

        .featured-restaurant-card,
        .activity-card {
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
            text-decoration: none;
            color: inherit;
            margin-bottom: 1rem;
            width: 100%;
            transform: scale(1);
            transform-origin: center;
        }

        @media (min-width: 768px) {
            .featured-restaurants-grid,
            .activity-zone-grid {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            .featured-restaurant-card,
            .activity-card {
                max-width: 480px;
                width: 100%;
            }
        }

        .featured-restaurant-card:hover,
        .activity-card:hover {
            transform: scale(1) translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
            text-decoration: none;
            color: inherit;
        }

        /* === 標籤圖片樣式 === */
        .tag-card {
            position: relative;
            aspect-ratio: 5/2;
            border-radius: 0.75rem;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(213, 156, 66, 0.15);
            transition: all 0.3s ease;
            min-height: 60px;
            max-height: 80px;
        }
        
        .tag-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .tag-card .card-img-top {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .tag-card .card-img-overlay {
            position: relative;
            z-index: 3;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);
            color: white;
            padding: 1rem;
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            min-height: 60px;
        }
        
        /* 沒有圖片時的純文字標籤樣式 - 豐富顏色變化 */
        .tag-card.no-image {
            border: 2px solid rgba(213, 156, 66, 0.2);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            min-height: 60px;
            max-height: 80px;
        }
        
        /* 不同顏色變化 */
        .tag-card.no-image:nth-child(1) {
            background: linear-gradient(135deg, #fef3e2 0%, #fbbf24 100%);
            border-color: rgba(251, 191, 36, 0.3);
        }
        
        .tag-card.no-image:nth-child(2) {
            background: linear-gradient(135deg, #ecfdf5 0%, #10b981 100%);
            border-color: rgba(16, 185, 129, 0.3);
        }
        
        .tag-card.no-image:nth-child(3) {
            background: linear-gradient(135deg, #eff6ff 0%, #3b82f6 100%);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .tag-card.no-image:nth-child(4) {
            background: linear-gradient(135deg, #fdf4ff 0%, #8b5cf6 100%);
            border-color: rgba(139, 92, 246, 0.3);
        }
        
        .tag-card.no-image:nth-child(5) {
            background: linear-gradient(135deg, #fef2f2 0%, #ef4444 100%);
            border-color: rgba(239, 68, 68, 0.3);
        }
        
        .tag-card.no-image:nth-child(6) {
            background: linear-gradient(135deg, #f0fdf4 0%, #22c55e 100%);
            border-color: rgba(34, 197, 94, 0.3);
        }
        
        .tag-card.no-image:nth-child(7) {
            background: linear-gradient(135deg, #fef7ed 0%, #f97316 100%);
            border-color: rgba(249, 115, 22, 0.3);
        }
        
        .tag-card.no-image:nth-child(8) {
            background: linear-gradient(135deg, #f1f5f9 0%, #64748b 100%);
            border-color: rgba(100, 116, 139, 0.3);
        }
        
        .tag-card.no-image .card-img-overlay {
            background: none;
            z-index: 2;
            justify-content: center;
            align-items: center;
            min-height: 100%;
            padding: 0.5rem 1rem;
        }
        
        .tag-card.no-image .card-title {
            color: white !important;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            font-weight: var(--font-bold);
            font-size: 0.9rem;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        
        .tag-card .card-title {
            margin: 0;
            font-size: var(--text-base);
            font-weight: var(--font-semibold);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
            line-height: 1.3;
            color: white !important;
        }

        /* === 食物類別緊湊網格布局 === */
        .foodtype-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(75px, 1fr));
            gap: 0.375rem;
            padding: 0;
            margin: 0;
        }

        .foodtype-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            padding: 0.5rem 0.375rem;
            border-radius: 1rem;
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.08);
            min-height: 75px;
            justify-content: center;
        }

        .foodtype-item:hover {
            transform: translateY(-2px);
            text-decoration: none;
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            border-color: rgba(213, 156, 66, 0.2);
        }

        .foodtype-item .card-img-top {
            width: 38px;
            height: 38px;
            object-fit: cover;
            object-position: center;
            border-radius: 50%;
            margin-bottom: 0.25rem;
            transition: all 0.2s ease;
        }

        .foodtype-item:hover .card-img-top {
            transform: scale(1.1);
        }

        .foodtype-item .card-title {
            font-size: 0.7rem;
            font-weight: var(--font-medium);
            color: var(--text-primary);
            text-align: center;
            line-height: 1.1;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }

        /* === RWD 響應式調整 === */
        @media (max-width: 575.98px) {
            /* 超小屏幕 - 更寬鬆的設計 */
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .store-card .card-img-top {
                height: 120px;
            }
            
            .fromstore-card .card-img-top {
                aspect-ratio: 8/5;
            }

            .tag-card {
                height: 60px;
                margin-bottom: 0.75rem;
                aspect-ratio: 4/1;
            }

            .foodtype-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 0.375rem;
            }

            .foodtype-item {
                padding: 0.5rem 0.25rem;
                min-height: 75px;
            }

            .foodtype-item .card-img-top {
                width: 36px;
                height: 36px;
                margin-bottom: 0.25rem;
            }

            .foodtype-item .card-title {
                font-size: 0.65rem;
                line-height: 1;
            }
            
            .section-title h3 {
                font-size: 1.25rem;
            }
            
            .section-title h3 i {
                font-size: 1.25rem !important;
            }
            
            .section-icon {
                width: 32px;
                height: 32px;
            }

            /* 店家網格 - 手機版一列一個，完整顯示 */
            .stores-grid {
                display: block;
            }
            
            .store-grid-card {
                margin-bottom: 1rem;
                width: 100%;
            }
        }

        @media (min-width: 576px) and (max-width: 767.98px) {
            /* 小屏幕 - 平衡設計 */
            .store-card .card-img-top {
                height: 140px;
            }

            .fromstore-card .card-img-top {
                aspect-ratio: 8/5;
            }

            .tag-card {
                height: 70px;
                aspect-ratio: 4/1;
            }

            .foodtype-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 0.5rem;
            }

            .foodtype-item {
                padding: 0.625rem 0.375rem;
                min-height: 80px;
            }

            .foodtype-item .card-img-top {
                width: 40px;
                height: 40px;
                margin-bottom: 0.3rem;
            }
            
            .foodtype-item .card-title {
                font-size: 0.7rem;
            }

            /* 店家網格 - 小螢幕一列一個，完整顯示 */
            .stores-grid {
                display: block;
            }
            
            .store-grid-card {
                margin-bottom: 1rem;
                width: 100%;
            }
        }

        @media (min-width: 768px) and (max-width: 991.98px) {
            /* 中等屏幕 - 舒適設計 */
            .store-card .card-img-top {
                height: 160px;
            }

            .fromstore-card .card-img-top {
                aspect-ratio: 8/5;
            }

            .tag-card {
                height: 75px;
                aspect-ratio: 5/1;
            }

            .foodtype-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 0.75rem;
            }

            .foodtype-item {
                padding: 0.75rem 0.5rem;
                min-height: 85px;
            }

            .foodtype-item .card-img-top {
                width: 44px;
                height: 44px;
                margin-bottom: 0.375rem;
            }
            
            .foodtype-item .card-title {
                font-size: 0.75rem;
            }

            /* 店家完整顯示 - 平板 */
            .stores-grid {
                display: block;
            }
            
            .store-grid-card {
                margin-bottom: 1rem;
                width: 100%;
            }
        }

        @media (min-width: 992px) {
            /* 大屏幕 - 最佳視覺效果 */
            .store-card .card-img-top {
                height: 200px;
            }

            .fromstore-card .card-img-top {
                aspect-ratio: 8/5;
            }

            .tag-card {
                height: 80px;
                aspect-ratio: 5/1;
            }

            .foodtype-grid {
                grid-template-columns: repeat(8, 1fr);
                gap: 0.875rem;
            }

            .foodtype-item {
                padding: 0.875rem 0.5rem;
                min-height: 90px;
            }

            .foodtype-item .card-img-top {
                width: 48px;
                height: 48px;
                margin-bottom: 0.375rem;
            }
            
            .foodtype-item .card-title {
                font-size: 0.8rem;
            }

            /* 店家完整顯示 - 桌面 */
            .stores-grid {
                display: block;
            }
            
            .store-grid-card {
                margin-bottom: 1.25rem;
                width: 100%;
            }
        }

        /* === 統一卡片間距和對齊 === */
        .swiper-slide {
            height: auto;
            display: flex;
        }

        .swiper-slide .card,
        .swiper-slide .tag-card,
        .swiper-slide .foodtype-item {
            width: 100%;
            margin-bottom: 0;
        }

        /* === 優化文字顯示 === */
        .store-card .card-title {
            font-size: 1rem;
            font-weight: 600;
            line-height: 1.3;
            color: #1a1a1a;
            margin: 0 0 0.25rem 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .store-card .delivery-time {
            font-size: 0.875rem;
            font-weight: 500;
            color: #666;
            margin: 0 0 0.25rem 0;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .store-card .delivery-info {
            font-size: 0.75rem;
            color: #999;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .store-card .rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
            color: #ff6b35;
        }

        .store-card .tags {
            font-size: 0.75rem;
            color: #999;
            margin-top: 0.5rem;
        }

        .store-status-badge {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 2;
            backdrop-filter: blur(4px);
        }

        .store-status-badge.open {
            background: rgba(16, 185, 129, 0.9);
            color: white;
        }

        .store-status-badge.closed {
            background: rgba(107, 114, 128, 0.9);
            color: white;
        }

        .tag-card .card-title {
            font-size: var(--text-xl);
            font-weight: var(--font-bold);
            color: var(--text-white);
            text-shadow: 0 2px 8px rgba(0,0,0,0.6);
            margin: 0;
            line-height: var(--leading-tight);
            letter-spacing: var(--tracking-wide);
        }

        .foodtype-item .card-title {
            font-size: var(--text-xs);
            font-weight: var(--font-medium);
            color: var(--text-secondary);
            text-align: center;
            line-height: var(--leading-snug);
            margin: 0;
            max-width: 70px;
            word-break: break-word;
            letter-spacing: var(--tracking-normal);
        }

        /* 徽章樣式優化 */
        .badge {
            font-size: var(--text-xs);
            font-weight: var(--font-medium);
            padding: 0.375rem 0.75rem;
            border-radius: 0.5rem;
            letter-spacing: var(--tracking-wide);
        }

        .badge.text-success {
            background-color: var(--text-success);
            color: var(--text-white);
            box-shadow: 0 2px 4px rgba(16, 185, 129, 0.25);
        }

        .badge.text-danger {
            background-color: var(--text-danger);
            color: var(--text-white);
            box-shadow: 0 2px 4px rgba(239, 68, 68, 0.25);
        }

        /* 時間和距離文字優化 */
        .time-text {
            font-family: var(--font-english);
            font-weight: var(--font-medium);
            color: var(--text-accent);
        }

        .distance-text {
            font-family: var(--font-english);
            font-weight: var(--font-medium);
            color: var(--text-muted);
        }

        /* 標籤文字優化 */
        .tag-text {
            font-size: var(--text-xs);
            font-weight: var(--font-normal);
            color: var(--text-subtle);
            background-color: rgba(213, 156, 66, 0.1);
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            margin-right: 0.25rem;
            display: inline-block;
        }

        /* 高級搜尋框 - 進階設計 */
        .search-container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            width: 100%;
        }
        
        @media (max-width: 575.98px) {
            .search-container {
                max-width: 100%;
                margin: 0;
            }
        }

        .search-wrapper {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .premium-search {
            position: relative;
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 2px solid #e9ecef;
            border-radius: 1.5rem;
            padding: 0.375rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            flex: 1;
        }

        .premium-search:focus-within {
            border-color: var(--text-accent);
            box-shadow: 0 12px 40px rgba(213, 156, 66, 0.2);
            transform: translateY(-2px);
        }

        .premium-input {
            flex: 1;
            border: none;
            background: transparent;
            padding: 0.625rem 1rem;
            font-size: 0.9rem;
            font-weight: var(--font-normal);
            font-family: var(--font-primary);
            color: var(--text-primary);
            outline: none;
            letter-spacing: var(--tracking-normal);
        }

        .premium-input::placeholder {
            color: var(--text-muted);
            font-weight: var(--font-light);
        }

        .premium-search-btn {
            background: linear-gradient(135deg, var(--text-accent), #f59e0b);
            border: none;
            border-radius: 1.25rem;
            padding: 0.625rem 1.25rem;
            color: white;
            font-weight: var(--font-medium);
            box-shadow: 0 4px 16px rgba(213, 156, 66, 0.3);
            transition: all 0.3s ease;
            margin-left: 0.375rem;
        }

        .premium-search-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(213, 156, 66, 0.4);
            background: linear-gradient(135deg, #f59e0b, var(--text-accent));
        }

        .premium-search-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* 進階搜尋按鈕 */
        .advanced-search-btn {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 1rem;
            padding: 0.625rem;
            color: var(--text-muted);
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            min-width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .advanced-search-btn:hover {
            border-color: var(--text-accent);
            color: var(--text-accent);
            box-shadow: 0 4px 12px rgba(213, 156, 66, 0.2);
            transform: translateY(-1px);
        }

        /* 美食標籤懸浮選單 */
        .food-tags-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(213, 156, 66, 0.2);
            padding: 1rem;
            margin-top: 0.5rem;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .food-tags-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .food-tags-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.5rem;
        }

        .food-tag-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            border-radius: 0.75rem;
            border: 1px solid rgba(213, 156, 66, 0.1);
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.2s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .food-tag-item:hover {
            background: rgba(213, 156, 66, 0.1);
            border-color: var(--text-accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(213, 156, 66, 0.2);
            text-decoration: none;
            color: inherit;
        }

        .food-tag-item img {
            width: 32px;
            height: 32px;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 0.25rem;
        }

        .food-tag-item span {
            font-size: 0.75rem;
            font-weight: var(--font-medium);
            text-align: center;
            color: var(--text-primary);
        }

        /* 區塊標題優化 - 響應式設計 */
        .section-title {
            position: relative;
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding: 0;
        }

        .section-title h3 {
            font-size: 1.5rem;
            font-weight: var(--font-bold);
            color: var(--text-primary);
            margin: 0;
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .section-title h3 i {
            font-size: 1.5rem;
            color: var(--text-accent);
            margin-right: 0.75rem;
            filter: drop-shadow(0 2px 4px rgba(213, 156, 66, 0.2));
        }

        .section-title h3::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, var(--text-accent) 0%, rgba(213, 156, 66, 0.3) 50%, transparent 100%);
            margin-left: 1rem;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            margin-right: 0.75rem;
            filter: drop-shadow(0 2px 4px rgba(213, 156, 66, 0.2));
        }

        /* 內容區塊間距 - 超緊湊設計 */
        .content-section {
            margin-bottom: 0.5rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            border: 1px solid rgba(213, 156, 66, 0.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        /* 頁面背景優化 */
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
        }

        .content-wrapper {
            background: transparent;
            min-height: calc(100vh - 200px);
        }

        .content {
            padding-bottom: 2rem;
        }

        /* 電腦端容器優化 - 放大版面 */
        @media (min-width: 1200px) {
            .container {
                max-width: 1600px;
                padding-left: 2.5rem;
                padding-right: 2.5rem;
            }
            
            /* 放大字體和間距 */
            .section-title h3 {
                font-size: 1.75rem;
            }
            
            .section-title h3 i {
                font-size: 1.5rem !important;
            }
            
            .content-section {
                margin-bottom: 1rem;
                padding: 1.25rem;
            }
            
            /* 放大店家卡片 - 使用 aspect-ratio 替代固定高度 */
            
            .store-card .card-title,
            .store-grid-card .card-title {
                font-size: 1.125rem;
            }
            
            .store-card .delivery-time,
            .store-card .delivery-info,
            .store-grid-card .delivery-time,
            .store-grid-card .delivery-info {
                font-size: 0.9rem;
            }
            
            /* 放大食物類別 */
            .foodtype-item {
                min-height: 110px;
                padding: 1rem 0.75rem;
            }
            
            .foodtype-item .card-img-top {
                width: 58px;
                height: 58px;
                padding: 0.5rem;
            }
            
            .foodtype-item .card-title {
                font-size: 0.95rem;
            }

            /* 店家完整顯示 - 大螢幕 */
            .stores-grid {
                display: block;
            }
            
            .store-grid-card {
                margin-bottom: 1.5rem;
                width: 100%;
            }
        }

        @media (min-width: 992px) and (max-width: 1199.98px) {
            .container {
                max-width: 1300px;
                padding-left: 2rem;
                padding-right: 2rem;
            }
            
            /* 中等屏幕字體放大 */
            .section-title h3 {
                font-size: 1.5rem;
            }
            
            .content-section {
                margin-bottom: 0.75rem;
                padding: 1rem;
            }
            
            /* 中等屏幕使用 aspect-ratio */
            
            /* 中等屏幕食物類別 */
            .foodtype-item {
                min-height: 95px;
                padding: 0.875rem 0.625rem;
            }
            
            .foodtype-item .card-img-top {
                width: 50px;
                height: 50px;
                padding: 0.375rem;
            }
        }

        /* 小手機版響應式設計 */
        @media (max-width: 479.98px) {
            .content-header .row {
                flex-direction: column !important;
            }
            
            .content-header .col-auto,
            .content-header .col {
                width: 100% !important;
                max-width: 100% !important;
                flex: 0 0 100% !important;
                margin-left: 0 !important;
            }
            
            .content-header h1 {
                font-size: 1rem !important;
                text-align: center;
                margin-bottom: 0.5rem !important;
            }
            
            .search-container {
                margin-top: 0.5rem;
            }
            
            .fromstore-card {
                min-height: 100px;
                flex-direction: column !important;
            }
            
            .fromstore-card .card-img-top {
                width: 100% !important;
                height: 120px !important;
                min-width: auto !important;
                max-width: none !important;
            }
            
            .fromstore-card .card-body {
                padding: 0.75rem;
            }
        }

        /* 手機版響應式設計 */
        @media (min-width: 480px) and (max-width: 575.98px) {
            .content-section {
                margin-bottom: 1rem;
                padding: 1rem;
                border-radius: 0.75rem;
            }
            
            .section-title {
                margin-bottom: 1rem;
                padding: 0;
            }
            
            .section-title h3 {
                font-size: 1.375rem;
            }
            
            .section-title h3 i {
                font-size: 1.375rem !important;
            }
            
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            /* 手機版文字大小 */
            .store-card .card-title,
            .store-grid-card .card-title {
                font-size: 1.125rem;
            }
            
            .store-card .delivery-time,
            .store-grid-card .delivery-time {
                font-size: 1rem;
            }
            
            .store-card .delivery-info,
            .store-grid-card .delivery-info {
                font-size: 0.9rem;
            }
            
            .store-grid-card .card-img-top {
                height: 180px;
            }
            
            /* 修正食物類別網格 */
            .foodtype-grid {
                min-height: auto;
            }
            
            .foodtype-item {
                min-height: 75px;
                padding: 0.5rem 0.375rem;
            }
            
            .foodtype-item .card-img-top {
                width: 38px;
                height: 38px;
            }
            
            /* 猜你想看手機版調整 */
            .fromstore-card {
                flex-direction: column;
                height: auto;
            }
            
            .fromstore-card .card-img-top {
                width: 100%;
                aspect-ratio: 8/5;
            }
            
            .fromstore-card .card-body {
                padding: 0.75rem;
            }
        }

        /* 平板版響應式設計 */
        @media (min-width: 576px) and (max-width: 767.98px) {
            .content-section {
                margin-bottom: 1.25rem;
                padding: 1.25rem;
            }
            
            .section-title {
                margin-bottom: 1.25rem;
            }
            
            .section-title h3 {
                font-size: 1.5rem;
            }
            
            .section-title h3 i {
                font-size: 1.5rem !important;
            }
            
            .store-grid-card .card-title {
                font-size: 1.25rem;
            }
            
            .store-grid-card .delivery-time {
                font-size: 1rem;
            }
            
            .store-grid-card .delivery-info {
                font-size: 0.9rem;
            }
            
            .store-grid-card .card-img-top {
                height: 200px;
            }
        }

        /* 中等屏幕響應式設計 */
        @media (min-width: 768px) and (max-width: 1199.98px) {
            .content-section {
                margin-bottom: 1.5rem;
                padding: 1.5rem;
            }
            
            .section-title {
                margin-bottom: 1.5rem;
            }
            
            .section-title h3 {
                font-size: 1.625rem;
            }
            
            .section-title h3 i {
                font-size: 1.625rem !important;
            }
            
            .store-grid-card .card-title {
                font-size: 1.375rem;
            }
            
            .store-grid-card .delivery-time {
                font-size: 1.125rem;
            }
            
            .store-grid-card .delivery-info {
                font-size: 1rem;
            }
            
            .store-grid-card .card-img-top {
                height: 220px;
            }
        }

        /* 大屏幕響應式設計 */
        @media (min-width: 1200px) {
            .content-section {
                margin-bottom: 2rem;
                padding: 2rem;
            }
            
            .section-title {
                margin-bottom: 2rem;
            }
            
            .section-title h3 {
                font-size: 1.75rem;
            }
            
            .section-title h3 i {
                font-size: 1.75rem !important;
            }
            
            .store-grid-card .card-title {
                font-size: 1.5rem;
            }
            
            .store-grid-card .delivery-time {
                font-size: 1.25rem;
            }
            
            .store-grid-card .delivery-info {
                font-size: 1.125rem;
            }
            
            .store-grid-card .card-img-top {
                height: 250px;
            }
        }
    </style>
</head>

<body class="hold-transition sidebar-collapse layout-top-nav layout-footer-fixed">
    <div class="preloader flex-column justify-content-center align-items-center">
        <img class="animation__shake" src="img/logo.svg" style="height: 15vh;">
    </div>
    <div class="wrapper" id="app">
        <nav class="main-header navbar navbar-expand-md navbar-light navbar-white">
            <div class="container">
                <a class="toIndex navbar-brand">
                    <img src="img/logo2.svg" alt="AdminLTE Logo" class="" style="width: 200px;">
                </a>

                <!-- <button class="navbar-toggler order-1" type="button" data-toggle="collapse"
                    data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button> -->

                <!-- <div class="collapse navbar-collapse order-3" id="navbarCollapse">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i
                                    class="fas fa-bars"></i></a>
                        </li>
                        <li class="nav-item">
                            <a href="index3.html" class="nav-link">Home</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">Contact</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a id="dropdownSubMenu1" href="#" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false" class="nav-link dropdown-toggle">Dropdown</a>
                            <ul aria-labelledby="dropdownSubMenu1" class="dropdown-menu border-0 shadow">
                                <li><a href="#" class="dropdown-item">Some action </a></li>
                                <li><a href="#" class="dropdown-item">Some other action</a></li>

                                <li class="dropdown-divider"></li>

                <li class="dropdown-submenu dropdown-hover">
                    <a id="dropdownSubMenu2" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false" class="dropdown-item dropdown-toggle">Hover for action</a>
                    <ul aria-labelledby="dropdownSubMenu2" class="dropdown-menu border-0 shadow">
                        <li>
                            <a tabindex="-1" href="#" class="dropdown-item">level 2</a>
                        </li>

                        <li class="dropdown-submenu">
                            <a id="dropdownSubMenu3" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false" class="dropdown-item dropdown-toggle">level 2</a>
                            <ul aria-labelledby="dropdownSubMenu3" class="dropdown-menu border-0 shadow">
                                <li><a href="#" class="dropdown-item">3rd level</a></li>
                                <li><a href="#" class="dropdown-item">3rd level</a></li>
                            </ul>
                        </li>

                        <li><a href="#" class="dropdown-item">level 2</a></li>
                        <li><a href="#" class="dropdown-item">level 2</a></li>
                    </ul>
                </li>
                </ul>
                </li>
                </ul>

            </div> -->


                <ul class="order-1 order-md-3 navbar-nav navbar-no-expand ml-auto">
                    <li class="nav-item">
                        <a class="nav-link toCart" data-toggle="dropdown">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="badge badge-primary navbar-badge text-sm">{{cartCount}}</span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" data-toggle="dropdown" href="#">
                            <i class="fas fa-user mr-2"></i>Hi, {{userInfo.name}}
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                            <span class="dropdown-header">使用者功能</span>
                            <div class="dropdown-divider"></div>
                            <div v-for="(func,index) in userFunction">
                                <a v-if="func.name !== '登出'" :href="func.url" class="dropdown-item">
                                    {{func.name}}
                                    <span class="float-right text-muted text-sm">
                                        <i :class="func.icon"></i>
                                    </span>
                                </a>
                                <a v-else @click="logout()" class="dropdown-item" style="cursor: pointer;">
                                    {{func.name}}
                                    <span class="float-right text-muted text-sm">
                                        <i :class="func.icon"></i>
                                    </span>
                                </a>
                                <div class="dropdown-divider"></div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="content-wrapper">
            <div class="content-header" style="padding: 0.75rem 0;">
                <div class="container">
                    <div class="row align-items-center no-gutters" style="flex-wrap: nowrap;">
                        <div class="col-auto" style="flex-shrink: 0;">
                            <h1 class="m-0 text-gradient text-shadow" style="font-size: 1.125rem; margin-bottom: 0; white-space: nowrap;"> 
                                {{getTimeOfDay()}}<span class="text-primary">{{userInfo.name}}</span>
                            </h1>
                        </div>
                        <div class="col ml-2" style="flex-shrink: 1; min-width: 0;">
                            <!-- 搜尋區塊 -->
                            <div class="search-container" style="margin: 0;">
                                <div class="search-wrapper">
                                    <form class="Myinput-group premium-search" @submit.prevent="search" style="flex: 1;">
                                        <input type="search" 
                                               class="premium-input" 
                                               placeholder="搜尋餐廳、料理類型、商圈..." 
                                               v-model="searchKeyword"
                                               @focus="showFoodTags = true"
                                               @blur="hideFoodTags">
                                        <button type="submit" 
                                                class="btn premium-search-btn" 
                                                :disabled="searchKeyword.length==0">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </form>
                                    <button class="btn advanced-search-btn" 
                                            @click="toggleFoodTags"
                                            title="進階搜尋">
                                        <i class="fas fa-sliders-h"></i>
                                    </button>
                                </div>
                                
                                <!-- 美食標籤懸浮選單 -->
                                <div class="food-tags-dropdown" 
                                     :class="{ 'show': showFoodTags }"
                                     @mousedown.prevent>
                                    <div class="food-tags-grid">
                                        <a v-for="(item, index) in FoodTypeList.slice(0, 12)" 
                                           :key="index"
                                           class="food-tag-item"
                                           :href="'ClassImformation.html?cid='+item.tagId"
                                           @click="hideFoodTags">
                                            <img :src="item.imageUrl || item.tagPicture || 'img/unknowIMG.png'" />
                                            <span>{{ item.title }}</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 mt-2">
                            <ol class="breadcrumb" style="font-size: 0.75rem; margin-bottom: 0; background: none; padding: 0;">
                                <li class="breadcrumb-item"><a class="toIndex">SHARING</a></li>
                                <li class="breadcrumb-item">{{PageTitle}}</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="container">
                    <!-- 猜你想看區塊 - 橫幅設計，無標題 -->
                                        <div v-if="fromStore.store.storeId.length>0" class="content-section">
                        <div class="row justify-content-center">
                            <div class="col-12">
                                <a class="fromstore-card"
                                :href="'StoreImformation.html?sid='+fromStore.store.storeId">
                                    <img class="card-img-top" :src="fromStore.store.bannerimage || fromStore.store.image || 'img/unknowIMG.png'" />
                                <div class="card-body">
                                        <h6 class="card-title">{{ fromStore.store.storeName }}</h6>
                                        <div class="delivery-time">
                                        <i class="far fa-clock mr-2"></i>
                                        {{getWaitingTimeString(fromStore.nextAvailable.waitingTimeDisplay)}}
                                        </div>
                                        <div class="delivery-info">
                                            <i class="fas fa-map-marker-alt mr-2"></i>
                                            {{fromStore.store.distance || '距離未知'}}
                                        </div>
                                        <div class="store-tags" v-if="fromStore.storeInfo && fromStore.storeInfo.tags && fromStore.storeInfo.tags.length > 0">
                                            <span v-for="(tag, tagIndex) in fromStore.storeInfo.tags.slice(0, 3)" 
                                                  :key="tagIndex" 
                                                  class="tag-badge">
                                                {{ tag }}
                                            </span>
                                        </div>
                                </div>
                            </a>
                        </div>
                        </div>
                    </div>
                    <div class="row">

                        <!-- ===== DEMO 區塊開始：附近商圈 ===== -->
                        <div class="col-12 content-section" v-show="BusinessDistrictList.length>0">
                            <div class="section-title">
                            <h3>
                                    <i class="fas fa-map-marked-alt"></i>
                                    附近商圈
                            </h3>
                            </div>
                            <div class="swiper-container w-100 overflow-hidden">
                                <div class="swiper-wrapper">
                                    <template v-for="(item, index) in BusinessDistrictList" :key="index">
                                        <a class="tag-card mb-2 swiper-slide"
                                            :class="{ 'no-image': !item.imageUrl && !item.tagPicture }"
                                            :href="'ClassImformation.html?cid='+item.tagId+'&cname='+item.title+'&ctype=附近的商圈'">
                                            <img v-if="item.imageUrl || item.tagPicture" 
                                                 class="card-img-top" 
                                                 :src="item.imageUrl || item.tagPicture" />
                                            <div class="card-img-overlay d-flex flex-column justify-content-end">
                                                <h5 class="card-title text-primary text-white">{{ item.title }}</h5>
                                            </div>
                                        </a>
                                    </template>
                                </div>
                                <button class="custom-prev-btn shadow">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <button class="custom-next-btn shadow">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        <!-- ===== DEMO 區塊結束：附近商圈 ===== -->

                        <!-- ===== DEMO 區塊開始：精選餐廳 ===== -->
                        <div class="col-12 content-section" v-show="FeaturedRestaurantsList.length>0">
                            <div class="section-title">
                                <h3>
                                    <i class="fas fa-crown"></i>
                                    精選餐廳
                            </h3>
                                            </div>
                            <div class="featured-restaurants-grid">
                                <a v-for="(item, index) in FeaturedRestaurantsList" 
                                   :key="index"
                                   class="featured-restaurant-card"
                                   :href="'StoreImformation.html?sid='+item.storeId">
                                    <div class="position-relative">
                                        <span class="store-status-badge" 
                                              :class="item.isOpen ? 'open' : 'closed'">
                                            {{ item.isOpen ? '營業中' : '休息中' }}
                                    </span>
                                        <img class="card-img-top" :src="item.bannerimage || item.image || 'img/unknowIMG.png'" />
                                    </div>
                                    <div class="card-body">
                                        <h6 class="card-title">{{ item.storeName }}</h6>
                                        <div class="delivery-time">
                                            <i class="far fa-clock"></i>
                                            {{getWaitingTimeString(item.waitingTimeDisplay)}}
                                        </div>
                                        <div class="delivery-info">
                                            <span class="distance">{{formatDistance(item.distanceInKM)}}</span>
                                        </div>
                                        <div class="store-tags" v-if="item.tags && item.tags.length > 0">
                                            <span v-for="(tag, tagIndex) in item.tags.slice(0, 3)" 
                                                  :key="tagIndex" 
                                                  class="tag-badge">
                                                {{ tag.title }}
                                            </span>
                                            <span v-if="item.tags.length > 3" class="tag-badge more-tags">
                                                +{{ item.tags.length - 3 }}
                                            </span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <!-- ===== DEMO 區塊結束：精選餐廳 ===== -->

                        <!-- ===== DEMO 區塊開始：活動專區 ===== -->
                        <div class="col-12 content-section" v-show="PromotionsList.length>0">
                            <div class="section-title">
                                <h3>
                                    <img src="img/bonus.png" class="section-icon">
                                    <span class="text-gradient">活動專區</span>
                            </h3>
                            </div>
                            <div class="swiper-container w-100 overflow-hidden">
                                <div class="swiper-wrapper">
                                    <template v-for="(item, index) in PromotionsList" :key="index">
                                        <a class="tag-card mb-2 swiper-slide"
                                            :class="{ 'no-image': !item.imageUrl && !item.tagPicture }"
                                            :href="'ClassImformation.html?cid='+item.tagId">
                                            <img v-if="item.imageUrl || item.tagPicture" 
                                                 class="card-img-top" 
                                                 :src="item.imageUrl || item.tagPicture" />
                                            <div class="card-img-overlay d-flex flex-column justify-content-end">
                                                <h5 class="card-title text-primary text-white">{{ item.title }}</h5>
                                            </div>
                                        </a>
                                    </template>
                                </div>
                                <button class="custom-prev-btn shadow">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <button class="custom-next-btn shadow">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        <!-- ===== DEMO 區塊結束：活動專區 ===== -->

                        <!-- 第四格：隱藏區塊1 -->
                        <div class="col-12 content-section hidden-section" :class="{ 'enabled': hiddenSection1.enabled }" v-show="hiddenSection1.enabled && hiddenSection1.data.length>0">
                            <div class="section-title">
                                <h3>
                                    <i :class="hiddenSection1.icon"></i>
                                    {{ hiddenSection1.title }}
                                </h3>
                            </div>
                            <div class="hidden-section-content">
                                <div class="swiper-container swiper-container-hidden1">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide" v-for="item in hiddenSection1.data" :key="item.id">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h6 class="card-title">{{ item.name }}</h6>
                                                    <p class="card-text text-muted">這是{{ hiddenSection1.title }}的測試內容</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 第五格：隱藏區塊2 -->
                        <div class="col-12 content-section hidden-section" :class="{ 'enabled': hiddenSection2.enabled }" v-show="hiddenSection2.enabled && hiddenSection2.data.length>0">
                            <div class="section-title">
                                <h3>
                                    <i :class="hiddenSection2.icon"></i>
                                    {{ hiddenSection2.title }}
                                </h3>
                            </div>
                            <div class="hidden-section-content">
                                <div class="swiper-container swiper-container-hidden2">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide" v-for="item in hiddenSection2.data" :key="item.id">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h6 class="card-title">{{ item.name }}</h6>
                                                    <p class="card-text text-muted">這是{{ hiddenSection2.title }}的測試內容</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 第六格：隱藏區塊3 -->
                        <div class="col-12 content-section hidden-section" :class="{ 'enabled': hiddenSection3.enabled }" v-show="hiddenSection3.enabled && hiddenSection3.data.length>0">
                            <div class="section-title">
                                <h3>
                                    <i :class="hiddenSection3.icon"></i>
                                    {{ hiddenSection3.title }}
                                </h3>
                            </div>
                            <div class="hidden-section-content">
                                <div class="swiper-container swiper-container-hidden3">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide" v-for="item in hiddenSection3.data" :key="item.id">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h6 class="card-title">{{ item.name }}</h6>
                                                    <p class="card-text text-muted">這是{{ hiddenSection3.title }}的測試內容</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ===== DEMO 區塊開始：所有餐廳 ===== -->
                        <div class="col-12 content-section">
                            <div class="section-title">
                                <h3>
                                    <i class="fas fa-store"></i>
                                    所有餐廳
                            </h3>
                    </div>
                            <div class="stores-grid" v-if="StoreList.length > 0">
                                <a v-for="(item, index) in StoreList" 
                                   :key="index"
                                   class="store-grid-card"
                                   :href="'StoreImformation.html?sid='+item.storeId">
                                    <div class="position-relative">
                                        <span class="store-status-badge" 
                                              :class="item.isOpen ? 'open' : 'closed'">
                                            {{ item.isOpen ? '營業中' : '休息中' }}
                                        </span>
                                        <img class="card-img-top" :src="item.bannerimage || item.image || 'img/unknowIMG.png'" />
                </div>
                                    <div class="card-body">
                                        <h6 class="card-title">{{ item.storeName }}</h6>
                                        <div class="delivery-time">
                                            <i class="far fa-clock"></i>
                                            {{getWaitingTimeString(item.waitingTimeDisplay)}}
                                        </div>
                                        <div class="delivery-info">
                                            <span class="distance">{{formatDistance(item.distanceInKM)}}</span>
                                        </div>
                                        <div class="store-tags" v-if="item.tags && item.tags.length > 0">
                                            <span v-for="(tag, tagIndex) in item.tags.slice(0, 3)" 
                                                  :key="tagIndex" 
                                                  class="tag-badge">
                                                {{ tag.title }}
                                            </span>
                                            <span v-if="item.tags.length > 3" class="tag-badge more-tags">
                                                +{{ item.tags.length - 3 }}
                                            </span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div v-else class="text-center py-4">
                                <p class="text-muted">正在載入附近餐廳...</p>
                                <p class="text-muted small">請確保已允許位置存取權限</p>
                        </div>
                        </div>
                        <!-- ===== DEMO 區塊結束：所有餐廳 ===== -->
                    </div>
                </div>
            </div>
        </div>

        <footer class="main-footer">
            <span class="float-right d-none d-sm-inline" id="version"></span>
            <!-- Default to the left -->
            <strong id="copyRight"></strong>
        </footer>

        <!-- 領券浮動按鈕 -->
        <button class="floating-coupon-btn" @click="openCouponPage" title="領取優惠券">
            <i class="fas fa-ticket-alt"></i>
        </button>
    </div>

</body>

<script>
    const app = Vue.createApp({
        data() {
            return {
                userFunction: userFunction,

                PageTitle: '首頁',

                //原始資料
                userInfo: localStorage.userInfo ? decryptObject(localStorage.userInfo) : {},
                cartCount: localStorage.cart ? JSON.parse(localStorage.cart).length : '',

                currentCoords: null, // 用戶當前座標
                stores: [], // 店家列表
                loading: false, // 加載狀態
                error: null, // 錯誤信息
                locationRequired: true, // 標記位置是否必須

                //優惠專區
                PromotionsList: [],

                //附近商圈
                BusinessDistrictList: [],

                //食物類型
                FoodTypeList: [],

                StoreList: [],

                // ===== DEMO 數據開始 =====
                // 以下為測試用假數據，正式上線前需要刪除
                demoPromotionsList: [
                    { tagId: 'promo1', title: '新店開幕優惠', imageUrl: 'img/bonus.png' },
                    { tagId: 'promo2', title: '限時85折', imageUrl: 'img/bonus.png' },
                    { tagId: 'promo3', title: '滿額送飲品', imageUrl: 'img/bonus.png' },
                    { tagId: 'promo4', title: '午餐特價', imageUrl: 'img/bonus.png' },
                    { tagId: 'promo5', title: '會員專屬', imageUrl: 'img/bonus.png' }
                ],
                
                demoBusinessDistrictList: [
                    { tagId: 'dist1', title: '西門町', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'dist2', title: '信義區', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'dist3', title: '中山區', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'dist4', title: '大安區', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'dist5', title: '松山區', imageUrl: 'img/unknowIMG.png' }
                ],
                
                demoFoodTypeList: [
                    { tagId: 'food1', title: '漢堡', imageUrl: 'img/foodtype/burger.png' },
                    { tagId: 'food2', title: '義式料理', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food3', title: '日式料理', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food4', title: '中式料理', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food5', title: '韓式料理', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food6', title: '泰式料理', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food7', title: '越式料理', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food8', title: '印度料理', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food9', title: '素食', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food10', title: '甜點', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food11', title: '飲品', imageUrl: 'img/unknowIMG.png' },
                    { tagId: 'food12', title: '小吃', imageUrl: 'img/unknowIMG.png' }
                ],
                
                demoStoreList: [
                    {
                        storeId: 'store1', storeName: '義大利麵專門店', isOpen: true, 
                        waitingTimeDisplay: 20, distanceInKM: 0.5, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '義式料理' }, { title: '平價' }, { title: '快速出餐' }]
                    },
                    {
                        storeId: 'store2', storeName: '日式拉麵館', isOpen: true, 
                        waitingTimeDisplay: 15, distanceInKM: 0.8, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '日式料理' }, { title: '湯麵' }, { title: '深夜食堂' }]
                    },
                    {
                        storeId: 'store3', storeName: '韓式燒肉', isOpen: false, 
                        waitingTimeDisplay: 30, distanceInKM: 1.2, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '韓式料理' }, { title: '燒肉' }, { title: '聚餐' }]
                    },
                    {
                        storeId: 'store4', storeName: '台式小吃攤', isOpen: true, 
                        waitingTimeDisplay: 10, distanceInKM: 0.3, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '台式料理' }, { title: '小吃' }, { title: '便宜' }]
                    },
                    {
                        storeId: 'store5', storeName: '泰式酸辣湯', isOpen: true, 
                        waitingTimeDisplay: 25, distanceInKM: 0.9, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '泰式料理' }, { title: '酸辣' }, { title: '香料' }]
                    },
                    {
                        storeId: 'store6', storeName: '美式漢堡店', isOpen: true, 
                        waitingTimeDisplay: 18, distanceInKM: 0.7, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '美式料理' }, { title: '漢堡' }, { title: '炸物' }]
                    },
                    {
                        storeId: 'store7', storeName: '印度咖哩屋', isOpen: false, 
                        waitingTimeDisplay: 35, distanceInKM: 1.5, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '印度料理' }, { title: '咖哩' }, { title: '香辣' }]
                    },
                    {
                        storeId: 'store8', storeName: '越式河粉', isOpen: true, 
                        waitingTimeDisplay: 12, distanceInKM: 0.4, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '越式料理' }, { title: '河粉' }, { title: '清爽' }]
                    },
                    {
                        storeId: 'store9', storeName: '素食健康餐', isOpen: true, 
                        waitingTimeDisplay: 22, distanceInKM: 1.1, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '素食' }, { title: '健康' }, { title: '有機' }]
                    },
                    {
                        storeId: 'store10', storeName: '法式甜點店', isOpen: true, 
                        waitingTimeDisplay: 8, distanceInKM: 0.6, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '甜點' }, { title: '法式' }, { title: '精緻' }]
                    },
                    {
                        storeId: 'store11', storeName: '手搖飲品店', isOpen: true, 
                        waitingTimeDisplay: 5, distanceInKM: 0.2, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '飲品' }, { title: '手搖' }, { title: '新鮮' }]
                    },
                    {
                        storeId: 'store12', storeName: '中式快餐', isOpen: true, 
                        waitingTimeDisplay: 15, distanceInKM: 0.5, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '中式料理' }, { title: '快餐' }, { title: '便當' }]
                    }
                ],
                
                demoFeaturedRestaurantsList: [
                    {
                        storeId: 'featured1', storeName: '米其林推薦餐廳', isOpen: true, 
                        waitingTimeDisplay: 45, distanceInKM: 2.0, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '精緻料理' }, { title: '米其林' }, { title: '高檔' }]
                    },
                    {
                        storeId: 'featured2', storeName: '網紅打卡店', isOpen: true, 
                        waitingTimeDisplay: 30, distanceInKM: 1.3, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '網紅店' }, { title: '打卡' }, { title: '時尚' }]
                    },
                    {
                        storeId: 'featured3', storeName: '老字號名店', isOpen: true, 
                        waitingTimeDisplay: 25, distanceInKM: 0.9, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '老字號' }, { title: '傳統' }, { title: '道地' }]
                    },
                    {
                        storeId: 'featured4', storeName: '新開幕餐廳', isOpen: true, 
                        waitingTimeDisplay: 20, distanceInKM: 0.7, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '新開幕' }, { title: '創新' }, { title: '話題' }]
                    },
                    {
                        storeId: 'featured5', storeName: '主廚特色料理', isOpen: true, 
                        waitingTimeDisplay: 40, distanceInKM: 1.8, bannerimage: 'img/unknowIMG.png',
                        tags: [{ title: '主廚料理' }, { title: '特色' }, { title: '創意' }]
                    }
                ],
                // ===== DEMO 數據結束 =====

                fromStore: {
                    store: {
                        storeName: '',
                        storeId: '',
                        image: ''
                    },
                    nextAvailable: {
                        waitingTimeDisplay: ''
                    }
                },

                searchKeyword: '',

                // 搜尋UI控制
                showFoodTags: false,

                // 精選餐廳列表
                FeaturedRestaurantsList: [],

                // 隱藏區塊配置
                hiddenSection1: {
                    enabled: false,
                    title: '隱藏區塊1',
                    icon: 'fas fa-question',
                    data: []
                },
                hiddenSection2: {
                    enabled: false,
                    title: '隱藏區塊2',
                    icon: 'fas fa-question',
                    data: []
                },
                hiddenSection3: {
                    enabled: false,
                    title: '隱藏區塊3',
                    icon: 'fas fa-question',
                    data: []
                }

            }
        },
        mounted() {
          // Detect if current user is a known crawler to skip LIFF login
          const userAgent = navigator.userAgent.toLowerCase();
          const isCrawler = /googlebot|bingbot|slurp|duckduckbot|baiduspider|yandexbot|sogou/.test(userAgent);
      
          if (isCrawler) {
              console.log("Detected crawler: skipping LINE login to avoid 4xx error.");
              return; // Stop here for crawlers (no LIFF redirect)
          }
          
            // 檢查並保存sid參數到localStorage
            const urlParams = new URLSearchParams(window.location.search);
            const sidParam = urlParams.get('sid');
            if (sidParam) {
                localStorage.setItem('pendingStoreId', sidParam);
                console.log('保存sid到localStorage:', sidParam);
            }
            
            // 檢查是否有之前保存的storeId
            const savedStoreId = localStorage.getItem('pendingStoreId');
            if (savedStoreId && !sidParam) {
                // 如果當前URL沒有sid但localStorage有，則使用保存的值
                window.storeId = savedStoreId;
                // 清除localStorage中的值，避免重複使用
                localStorage.removeItem('pendingStoreId');
                console.log('從localStorage恢復storeId:', savedStoreId);
            }
            
            let vue = this
            
            // 檢查現有登入狀態（無論TestModel是否開啟都要檢查）
            if (localStorage.userInfo) {
                try {
                    const existingUserInfo = decryptObject(localStorage.userInfo);
                    if (existingUserInfo && existingUserInfo.id) {
                        console.log("檢測到現有登入資訊，跳過LIFF登入流程");
                        vue.userInfo = existingUserInfo;
                        
                        // TestModel模式載入Demo數據
                        if (TestModel) {
                            vue.loadDemoData();
                        }
                        
                        // 初始化資料和畫面
                        vue.initializeApp();
                        return; // 跳過LIFF登入流程
                    }
                } catch (error) {
                    console.log("localStorage用戶資訊無效，需要重新登入:", error);
                    localStorage.removeItem('userInfo');
                }
            }
            
            if (TestModel) {
                // TestModel模式下仍然執行正常的LIFF登入流程
                // 只是會額外載入Demo數據
                console.log("TestModel模式：執行正常LIFF登入但會載入Demo數據");
                initializeLiff("2006327628-8x1g1rAv");
                // 附近店家現在使用網格布局，不需要輪播
                // new Swiper(".swiper-container-store", {
                //     loop: false, // 無限輪播
                //     slidesPerView: 1.5, // 預設桌機 4 個
                //     spaceBetween: 10, // 間距
                //     navigation: {
                //         nextEl: ".custom-next-btn",
                //         prevEl: ".custom-prev-btn",
                //     },
                //     breakpoints: {
                //         1024: { slidesPerView: 5.5 },  // 桌機
                //         768: { slidesPerView: 4.3 },   // 平板
                //         480: { slidesPerView: 2.5 }, // 一般手機
                //         375: { slidesPerView: 2.5 }, // iPhone SE
                //         320: { slidesPerView: 1.5 }  // 超小手機
                //     },
                // });
                new Swiper(".swiper-container-foodtype", {
                    loop: false,
                    slidesPerView: 4,
                    spaceBetween: 15,
                    speed: 300,
                    freeMode: false,
                    resistance: true,
                    resistanceRatio: 0.85,
                    observer: true,
                    observeParents: true,
                    navigation: {
                        nextEl: ".custom-next-btn",
                        prevEl: ".custom-prev-btn",
                    },
                    breakpoints: {
                        320: { slidesPerView: 3, spaceBetween: 8 },
                        375: { slidesPerView: 3, spaceBetween: 10 },
                        480: { slidesPerView: 4, spaceBetween: 12 },
                        768: { slidesPerView: 5, spaceBetween: 15 },
                        1024: { slidesPerView: 6, spaceBetween: 20 }
                    },
                });
            } else {
                initializeLiff("2006327628-8x1g1rAv")
            }




            async function initializeLiff(liffId) {
                try {
                    // 在初始化LIFF前，檢查並保存sid參數
                    const currentUrl = new URL(window.location.href);
                    const sidParam = currentUrl.searchParams.get('sid');
                    
                    await liff.init({ liffId });

                    // 如果未登入，執行登入
                    if (!liff.isLoggedIn()) {
                        // console.log("未登入，重新導向登入...");
                        
                        // 如果有sid參數，將其加入到登入重導向URL中
                        if (sidParam) {
                            const redirectUri = new URL(window.location.origin + window.location.pathname);
                            redirectUri.searchParams.set('sid', sidParam);
                            liff.login({ redirectUri: redirectUri.toString() });
                        } else {
                        liff.login();
                        }
                        return;
                    }

                    // 取得 LINE Profile（在登入後立即取得）
                    const profile = await liff.getProfile();
                    // console.log("取得使用者資料：", profile);

                    apiWeb("/api/login/line/login",
                        "POST",
                        JSON.stringify({ lineid: profile.userId, username: profile.displayName }),
                        '驗證管理員資訊', function (v) {
                            if (v.message == "Login successful") {
                                let userInfo = {
                                    name: v.username,
                                    id: v.lineid,
                                    phoneNum: v.mobileNumber,
                                    linekey: v.lineid,
                                }
                                localStorage.userInfo = encryptObject(userInfo);

                                vue.userInfo = userInfo

                                // TestModel模式載入Demo數據
                                if (TestModel) {
                                    // ===== DEMO 數據初始化 =====
                                    vue.loadDemoData();
                                    // ===== DEMO 數據初始化結束 =====
                                }

                                // 使用統一的初始化方法
                                vue.initializeApp();

                                new Swiper(".swiper-container-foodtype", {
                                    loop: false,
                                    slidesPerView: 4,
                                    spaceBetween: 15,
                                    speed: 300,
                                    freeMode: false,
                                    resistance: true,
                                    resistanceRatio: 0.85,
                                    observer: true,
                                    observeParents: true,
                                    navigation: {
                                        nextEl: ".custom-next-btn",
                                        prevEl: ".custom-prev-btn",
                                    },
                                    breakpoints: {
                                        320: { slidesPerView: 3, spaceBetween: 8 },
                                        375: { slidesPerView: 3, spaceBetween: 10 },
                                        480: { slidesPerView: 4, spaceBetween: 12 },
                                        768: { slidesPerView: 5, spaceBetween: 15 },
                                        1024: { slidesPerView: 6, spaceBetween: 20 }
                                    },
                                });
                            }
                        })
                } catch (e) {
                    console.error("LIFF 初始化錯誤：", e);
                    alert("LIFF 初始化錯誤：" + JSON.stringify(e));
                }
            }
        },
        watch: {
        },

        methods: {
            getTimeOfDay() {
                const hour = moment().hour(); // 獲取當前小時（24 小時制）

                if (hour >= 5 && hour < 12) {
                    return "早安，";
                } else if (hour >= 12 && hour < 18) {
                    return "午安，";
                } else if (hour >= 18 || hour < 5) {
                    return "晚安，";
                } else {
                    return "你好，";
                }
            },
            // 獲取用戶位置並查詢附近店家
            getLocation() {
                loadingOn()
                this.loading = true;
                this.error = null;
                this.stores = [];
                var vue = this

                // 檢查瀏覽器是否支持地理定位
                if (navigator.geolocation) {
                    // console.log(navigator.geolocation);

                    navigator.geolocation.getCurrentPosition(
                        // 成功獲取位置
                        (position) => {
                            this.currentCoords = {
                                latitude: position.coords.latitude,
                                longitude: position.coords.longitude,
                            };
                            // console.log("獲取位置成功:", this.currentCoords);
                            localStorage.latitude = this.currentCoords.latitude
                            localStorage.longitude = this.currentCoords.longitude

                            // console.log('vue.fetchNearbyStores();');

                            vue.fetchNearbyStores();
                        },
                        // 獲取位置失敗
                        (error) => {
                            this.loading = false;
                            switch (error.code) {
                                case error.PERMISSION_DENIED:
                                    this.error =
                                        "您必須允許位置訪問才能使用本服務。請重新整理頁面並允許位置請求，或在瀏覽器設定中啟用位置服務。";
                                    this.showLocationInstructions();
                                    break;
                                case error.POSITION_UNAVAILABLE:
                                    this.error = "位置信息不可用，請確認您的設備GPS或位置服務已開啟";
                                    break;
                                case error.TIMEOUT:
                                    this.error = "請求位置超時，請檢查您的網絡連接並重試";
                                    break;
                                case error.UNKNOWN_ERROR:
                                    this.error = "發生未知錯誤，請重新整理頁面後再試";
                                    break;

                            }
                        },
                        // 選項
                        {
                            enableHighAccuracy: true, // 高精度
                            timeout: 10000, // 10秒超時
                            maximumAge: 0, // 不使用緩存
                        }
                    );
                } else {
                    this.loading = false;
                    this.error = "您的瀏覽器不支持地理定位，請使用支持地理定位的現代瀏覽器";
                }
            },

            // 顯示位置訪問指導
            showLocationInstructions() {
                // 根據不同瀏覽器顯示不同的指導
                const browser = this.detectBrowser();
                let instructions = "要使用本服務，您需要允許位置訪問。";

                if (browser === "chrome") {
                    instructions +=
                        " 在Chrome中，請點擊地址欄左側的鎖頭圖標，並將「位置」設置為「允許」。";
                } else if (browser === "firefox") {
                    instructions +=
                        " 在Firefox中，請點擊地址欄左側的信息圖標，並將「位置」設置為「允許」。";
                } else if (browser === "safari") {
                    instructions += " 在Safari中，請前往「設定 > Safari > 位置服務」並啟用。";
                }

                instructions += " 設置完成後，請重新整理頁面。";

                this.error = instructions;
            },

            // 檢測瀏覽器類型
            detectBrowser() {
                const userAgent = navigator.userAgent.toLowerCase();
                if (userAgent.indexOf("chrome") > -1) return "chrome";
                if (userAgent.indexOf("firefox") > -1) return "firefox";
                if (userAgent.indexOf("safari") > -1) return "safari";
                return "unknown";
            },

            // 重試獲取位置
            retryLocation() {
                this.getLocation();
            },

            // 獲得店家
            fetchNearbyStores() {
                var vue = this
                if (storeId) {
                    let apiUrl = '/api/Store/detail/' + storeId;
                    if (localStorage.latitude && localStorage.longitude) {
                        apiUrl += '?latitude=' + localStorage.latitude + '&longitude=' + localStorage.longitude;
                    }
                    apiWeb(apiUrl, 'GET', null, '透過鏈結進入首頁', function (v) {
                        // console.log(v);
                        vue.fromStore = v
                        // console.log('透過鏈結進入首頁--------', vue.fromStore);

                        vue.getTheTags(function () { 
                            vue.getOpeningStore(function () { 
                                vue.getFeaturedRestaurants();
                                loadingOff();
                            });
                        });
                    })
                } else {
                    vue.getTheTags(function () { 
                        vue.getOpeningStore(function () { 
                            vue.getFeaturedRestaurants();
                            loadingOff();
                        });
                    });
                }
            },

            //附近營業店家
            getOpeningStore(_func) {
                var vue = this
                apiWeb('/api/stores?openOnly=true&latitude=' + localStorage.latitude + '&longitude=' + localStorage.longitude + '&&radius=' + radius, 'GET', null, '獲得附近店家', function (v) {
                    if (v.success == true) {
                        // console.log(v.data);

                        vue.StoreList = v.data
                        // console.log(vue.StoreList);
                        if (_func) _func()
                    }
                })
            },

            //可用標籤
            getTheTags(_func) {
                var vue = this
                apiWeb('/api/tags/nearby?latitude=' + localStorage.latitude + '&longitude=' + localStorage.longitude + '&&radius=' + radius + '&includeRelatedTags=true', 'GET', null, '獲得所有標籤', function (v) {
                    if (v.success == true) {
                        // 合併 nearbyTags 和 relatedTags
                        let nearbyTags = v.data.nearbyTags || []
                        let relatedTags = v.data.relatedTags || []
                        let allTags = [...nearbyTags, ...relatedTags]

                        vue.BusinessDistrictList = allTags.filter(tag => tag.typeName === "地區/商圈標籤");
                        vue.FoodTypeList = allTags.filter(tag => tag.typeName === "食物類別標籤");
                        vue.PromotionsList = allTags.filter(tag => tag.typeName === "優惠專區標籤");

                        if (_func) _func()
                    }
                })
            },

            // 格式化距離顯示
            formatDistance(distance) {
                if (distance < 1) {
                    return `${Math.round(distance * 1000)} 公尺`;
                } else {
                    return `${distance.toFixed(1)} 公里`;
                }
            },

            //搜尋
            search() {
                window.location.href = "ClassImformation.html?kw=" + this.searchKeyword + '&ctype=關鍵字搜尋&cname=' + this.searchKeyword
            },

            //回傳等待時間
            getWaitingTimeString(timeint) {
                if (timeint) {
                    // console.log('getWaitingTimeString--------', timeint);

                    if (typeof timeint !== 'number') {
                        timeint = Number(timeint)
                    }

                    if (timeint < 60) {
                        return timeint + '-' + (timeint + 10) + ' 分鐘'
                    } else {
                        return "60 分鐘以上"
                    }
                } else {
                    return "營業中"
                }
            },

            // 搜尋相關方法
            toggleFoodTags() {
                this.showFoodTags = !this.showFoodTags;
            },

            hideFoodTags() {
                setTimeout(() => {
                    this.showFoodTags = false;
                }, 200);
            },

            // 領券頁面
            openCouponPage() {
                // 預留功能，待後端實作
                toastr.info('領券功能開發中，敬請期待！');
            },

            // 獲得精選餐廳
            getFeaturedRestaurants() {
                var vue = this;
                // 這裡先用空數組，之後將根據「精選餐廳」標籤來篩選店家
                // apiWeb('/api/stores/featured?latitude=' + localStorage.latitude + '&longitude=' + localStorage.longitude + '&&radius=' + radius, 'GET', null, '獲得精選餐廳', function (v) {
                //     if (v.success == true) {
                //         vue.FeaturedRestaurantsList = v.data;
                //     }
                // });
                this.FeaturedRestaurantsList = []; // 暫時為空，待後續實作
            },

            // ===== DEMO 數據載入方法開始 =====
            loadDemoData() {
                // 載入測試用假數據，正式上線前需要刪除此方法
                this.PromotionsList = [...this.demoPromotionsList];
                this.BusinessDistrictList = [...this.demoBusinessDistrictList];
                this.FoodTypeList = [...this.demoFoodTypeList];
                this.StoreList = [...this.demoStoreList];
                this.FeaturedRestaurantsList = [...this.demoFeaturedRestaurantsList];
                
                // 啟用隱藏區塊並設置測試數據
                this.hiddenSection1.enabled = true;
                this.hiddenSection1.title = '今日推薦';
                this.hiddenSection1.icon = 'fas fa-thumbs-up';
                this.hiddenSection1.data = [
                    { id: 1, name: '推薦項目1' },
                    { id: 2, name: '推薦項目2' },
                    { id: 3, name: '推薦項目3' }
                ];
                
                this.hiddenSection2.enabled = true;
                this.hiddenSection2.title = '熱門活動';
                this.hiddenSection2.icon = 'fas fa-fire';
                this.hiddenSection2.data = [
                    { id: 1, name: '活動項目1' },
                    { id: 2, name: '活動項目2' },
                    { id: 3, name: '活動項目3' }
                ];
                
                this.hiddenSection3.enabled = true;
                this.hiddenSection3.title = '限時優惠';
                this.hiddenSection3.icon = 'fas fa-clock';
                this.hiddenSection3.data = [
                    { id: 1, name: '優惠項目1' },
                    { id: 2, name: '優惠項目2' },
                    { id: 3, name: '優惠項目3' }
                ];
                
                console.log('Demo數據已載入:', {
                    promotions: this.PromotionsList.length,
                    districts: this.BusinessDistrictList.length,
                    foodTypes: this.FoodTypeList.length,
                    stores: this.StoreList.length,
                    featured: this.FeaturedRestaurantsList.length,
                    hidden1: this.hiddenSection1.enabled,
                    hidden2: this.hiddenSection2.enabled,
                    hidden3: this.hiddenSection3.enabled
                });
            },
            // ===== DEMO 數據載入方法結束 =====

            // 統一的應用初始化方法
            initializeApp() {
                //資料初始化
                this.getLocation();

                //畫面初始化（性能優化版）
                new Swiper(".swiper-container", {
                    loop: false,
                    slidesPerView: 4,
                    spaceBetween: 10,
                    speed: 300, // 滑動速度
                    freeMode: false,
                    resistance: true,
                    resistanceRatio: 0.85,
                    preventClicks: false,
                    preventClicksPropagation: false,
                    observer: true,
                    observeParents: true,
                    updateOnWindowResize: true,
                    navigation: {
                        nextEl: ".custom-next-btn",
                        prevEl: ".custom-prev-btn",
                    },
                    breakpoints: {
                        320: { slidesPerView: 2.2, spaceBetween: 8 },
                        375: { slidesPerView: 2.5, spaceBetween: 8 },
                        480: { slidesPerView: 2.5, spaceBetween: 10 },
                        768: { slidesPerView: 4.3, spaceBetween: 10 },
                        1024: { slidesPerView: 5.5, spaceBetween: 10 }
                    },
                });

                // 初始化隱藏區塊的Swiper（如果啟用）
                if (this.hiddenSection1.enabled && this.hiddenSection1.data.length > 0) {
                    new Swiper(".swiper-container-hidden1", {
                        loop: false,
                        slidesPerView: 'auto',
                        spaceBetween: 15,
                        speed: 300,
                        freeMode: false,
                        resistance: true,
                        resistanceRatio: 0.85,
                        observer: true,
                        observeParents: true,
                        breakpoints: {
                            320: { slidesPerView: 1.2, spaceBetween: 10 },
                            480: { slidesPerView: 1.5, spaceBetween: 15 },
                            768: { slidesPerView: 2.5, spaceBetween: 15 },
                            1024: { slidesPerView: 3.5, spaceBetween: 20 }
                        }
                    });
                }

                if (this.hiddenSection2.enabled && this.hiddenSection2.data.length > 0) {
                    new Swiper(".swiper-container-hidden2", {
                        loop: false,
                        slidesPerView: 'auto',
                        spaceBetween: 15,
                        speed: 300,
                        freeMode: false,
                        resistance: true,
                        resistanceRatio: 0.85,
                        observer: true,
                        observeParents: true,
                        breakpoints: {
                            320: { slidesPerView: 1.2, spaceBetween: 10 },
                            480: { slidesPerView: 1.5, spaceBetween: 15 },
                            768: { slidesPerView: 2.5, spaceBetween: 15 },
                            1024: { slidesPerView: 3.5, spaceBetween: 20 }
                        }
                    });
                }

                if (this.hiddenSection3.enabled && this.hiddenSection3.data.length > 0) {
                    new Swiper(".swiper-container-hidden3", {
                        loop: false,
                        slidesPerView: 'auto',
                        spaceBetween: 15,
                        speed: 300,
                        freeMode: false,
                        resistance: true,
                        resistanceRatio: 0.85,
                        observer: true,
                        observeParents: true,
                        breakpoints: {
                            320: { slidesPerView: 1.2, spaceBetween: 10 },
                            480: { slidesPerView: 1.5, spaceBetween: 15 },
                            768: { slidesPerView: 2.5, spaceBetween: 15 },
                            1024: { slidesPerView: 3.5, spaceBetween: 20 }
                        }
                    });
                }
                
                console.log("應用初始化完成");
            },

            // 登出功能（可選擇使用AuthManager或原本方式）
            logout() {
                // 可以選擇使用AuthManager統一處理或原本的方式
                // AuthManager.performLogout(); // 統一方式
                
                // 原本的方式
                try {
                    localStorage.removeItem('userInfo');
                    localStorage.removeItem('cart');
                    localStorage.removeItem('requiredSelections');
                    localStorage.removeItem('pendingStoreId');
                    localStorage.removeItem('token');
                    
                    if (typeof liff !== 'undefined' && liff.isInClient()) {
                        if (liff.isLoggedIn()) {
                            liff.logout();
                        }
                    }
                    
                    window.location.href = "login.html";
                } catch (error) {
                    console.error("登出錯誤:", error);
                    localStorage.clear();
                    window.location.href = "login.html";
                }
            },

        },
        computed: {

        }
    });
    app.mount("#app");
</script>

</html>